{
	"env": {
		"CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1",
		"CLAUDE_CODE_EFFORT_LEVEL": "high"
	},
	"model": "opus",
	"teammateMode": "auto",
	"coauthorship": false,
	"statusLine": {
		"type": "command",
		"command": "bash \"$HOME/.claude/scripts/statusline.sh\""
	},
	"mcpServers": {
		"context7": {
			"command": "npx",
			"args": ["-y", "@upstash/context7-mcp@1.0.8"],
			"_comment": "Library documentation lookup. Auto-triggered by /docs skill and documentation-related prompts.",
			"serverInstructions": "Library and framework documentation lookup, API references, usage examples, and best practices. Use for questions about external libraries, SDKs, HTTP APIs, or how to use specific functions, components, or configuration options."
		},
		"Sanity": {
			"type": "http",
			"url": "https://mcp.sanity.io",
			"_comment": "Sanity CMS operations. Requires OAuth auth on first use. See: sanity.io/docs/compute-and-ai/mcp-server",
			"serverInstructions": "Sanity CMS content and configuration operations including querying datasets, inspecting schemas, and managing content documents. Use for any tasks involving Sanity projects, GROQ queries, or CMS-driven content workflows."
		},
		"tldr": {
			"command": "tldr-mcp",
			"args": ["--project", "."],
			"_comment": "Requires: pipx install llm-tldr. Run 'tldr warm .' in project to index.",
			"serverInstructions": "Semantic codebase analysis and repository-level search over the current project. Use when you need to find where something is implemented, understand large or unfamiliar code, or answer questions that require scanning many files across the codebase."
		}
	},
	"permissions": {
		"allow": [
			"Bash(bun:*)",
			"Bash(bunx:*)",
			"Bash(npm run:*)",

			"Bash(git status:*)",
			"Bash(git diff:*)",
			"Bash(git log:*)",
			"Bash(git branch:*)",
			"Bash(git add:*)",
			"Bash(git commit:*)",
			"Bash(git checkout:*)",
			"Bash(git stash:*)",
			"Bash(git push:*)",
			"Bash(gh:*)",

			"Bash(biome:*)",
			"Bash(vitest:*)",
			"Bash(agent-browser:*)",

			"Bash(ls:*)",
			"Bash(pwd:*)",
			"Bash(tree:*)",
			"Bash(wc:*)",
			"Bash(mkdir:*)",
			"Bash(cp:*)",
			"Bash(mv:*)",
			"Bash(rm -rf node_modules)",
			"Bash(rm -rf .next)",
			"Bash(rm -rf dist)",
			"Bash(rm -rf .turbo)",
			"Bash(rm *.tmp)",

			"Bash(curl:*)",

			"Read(*)",
			"Write(*)",
			"Edit(*)",
			"MultiEdit(*)",
			"Glob(*)",
			"Grep(*)",
			"LS(*)",
			"TodoWrite(*)",
			"NotebookEdit(*)"
		],
		"deny": [
			"Bash(rm -rf /)",
			"Bash(rm -rf /*)",
			"Bash(rm -rf ~)",
			"Bash(rm -rf ~/*)",
			"Bash(rm -rf ~/.ssh)",
			"Bash(rm -rf ~/.gnupg)",
			"Bash(rm -rf ~/.aws)",
			"Bash(rm -rf $HOME:*)",
			"Bash(rm -rf $HOME/*:*)",
			"Bash(rm -fr /:*)",
			"Bash(rm -fr /*:*)",
			"Bash(rm -fr ~:*)",
			"Bash(rm -fr ~/*:*)",
			"Bash(rm -Rf /:*)",
			"Bash(rm -Rf ~:*)",

			"Read(~/.ssh/*)",
			"Read(~/.aws/*)",
			"Read(~/.gnupg/*)",
			"Read(~/.config/gh/*)",
			"Read(~/.netrc)",
			"Bash(cat ~/.ssh/*)",
			"Bash(cat ~/.aws/*)",
			"Bash(cat ~/.gnupg/*)",
			"Bash(cp ~/.ssh/*:*)",
			"Bash(cp ~/.aws/*:*)",
			"Bash(mv ~/.ssh/*:*)",
			"Bash(mv ~/.aws/*:*)",
			"Write(~/.ssh/*)",
			"Write(~/.aws/*)",
			"Write(~/.gnupg/*)",

			"Bash(git push --force origin main)",
			"Bash(git push --force origin master)",
			"Bash(git push -f origin main)",
			"Bash(git push -f origin master)",
			"Bash(git reset --hard:*)",
			"Bash(git clean -f:*)",
			"Bash(git checkout -- .:*)",
			"Bash(git checkout -- *)",
			"Bash(git stash drop:*)",
			"Bash(git stash clear:*)",

			"Bash(curl * | bash)",
			"Bash(curl * | sh)",
			"Bash(wget * | bash)",
			"Bash(wget * | sh)",

			"Bash(sudo:*)",
			"Bash(chmod 777:*)",

			"Bash(find * -delete:*)",
			"Bash(xargs rm:*)"
		]
	},
	"hooks": {
		"UserPromptSubmit": [
			{
				"hooks": [
					{
						"type": "command",
						"command": "bash \"$HOME/.claude/scripts/skill-activation.sh\" \"$PROMPT\""
					}
				]
			},
			{
				"hooks": [
					{
						"type": "command",
						"command": "bash -c 'if echo \"$PROMPT\" | grep -qiE \"no,|wrong|actually,|instead|fix that|not what|should be|correction\"; then echo \"[Hook] Correction detected - consider capturing this as a learning with /learn\"; fi'"
					}
				]
			}
		],
		"PreToolUse": [
			{
				"matcher": "Bash",
				"hooks": [
					{
						"type": "command",
						"command": "bash \"$HOME/.claude/scripts/safety-net.sh\""
					}
				]
			},
			{
				"matcher": "Bash",
				"hooks": [
					{
						"type": "command",
						"command": "bash -c 'if echo \"$TOOL_INPUT\" | grep -qE \"git commit\"; then if [ -f tsconfig.json ]; then if ! bunx tsc --noEmit --pretty 2>&1 | tee /tmp/tsc-check.txt | tail -5; then echo \"[Pre-commit Hook] TypeScript errors found - fix before committing\"; exit 1; fi; if grep -q \"error TS\" /tmp/tsc-check.txt 2>/dev/null; then echo \"[Pre-commit Hook] TypeScript errors found - fix before committing\"; tail -20 /tmp/tsc-check.txt; exit 1; fi; fi; fi'"
					}
				]
			},
			{
				"matcher": "Edit",
				"hooks": [
					{
						"type": "command",
						"command": "bash \"$HOME/.claude/scripts/pre-edit-validate.sh\""
					}
				]
			}
		],
		"PostToolUse": [
			{
				"matcher": "Write|Edit",
				"hooks": [
					{
						"type": "command",
						"command": "bash \"$HOME/.claude/scripts/post-edit.sh\""
					}
				]
			},
			{
				"matcher": "Edit",
				"hooks": [
					{
						"type": "command",
						"command": "bash -c 'FILE=$(echo \"$TOOL_INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"\\([^\"]*\\)\"$/\\1/'); if [[ \"$FILE\" =~ \\.(ts|tsx)$ ]]; then bunx tsc --noEmit 2>&1 | grep -E \"$FILE\" || true; fi'",
						"async": true
					}
				]
			},
			{
				"matcher": "mcp__tldr",
				"hooks": [
					{
						"type": "command",
						"command": "bash \"$HOME/.claude/scripts/track-tldr.sh\" \"$TOOL_NAME\"",
						"async": true,
						"timeout": 10
					}
				]
			}
		],
		"PreCompact": [
			{
				"hooks": [
					{
						"type": "command",
						"command": "bash \"$HOME/.claude/scripts/create-handoff.sh\""
					}
				]
			}
		],
		"SessionStart": [
			{
				"hooks": [
					{
						"type": "command",
						"command": "bash \"$HOME/.claude/scripts/session-start.sh\""
					}
				]
			}
		],
		"SessionEnd": [
			{
				"hooks": [
					{
						"type": "command",
						"command": "bash \"$HOME/.claude/scripts/tldr-stats.sh\"; bash \"$HOME/.claude/scripts/create-handoff.sh\"",
						"async": true,
						"timeout": 30
					}
				]
			}
		],
		"Stop": [
			{
				"hooks": [
					{
						"type": "command",
						"command": "bash -c 'CHANGES=$(git diff --stat 2>/dev/null | tail -1); if [[ \"$CHANGES\" =~ ([0-9]+)[[:space:]]+file ]]; then COUNT=${BASH_REMATCH[1]}; if [ \"$COUNT\" -gt 5 ]; then echo \"[Hook] Session had significant changes ($COUNT files) - consider /learn store\"; fi; fi'"
					}
				]
			}
		],
		"SubagentStart": [
			{
				"hooks": [
					{
						"type": "command",
						"command": "bash -c 'echo \"[Swarm] Agent started: $AGENT_TYPE ($AGENT_ID)\" >> ~/.claude/swarm.log'",
						"async": true,
						"timeout": 5
					}
				]
			}
		],
		"SubagentStop": [
			{
				"hooks": [
					{
						"type": "command",
						"command": "bash -c 'echo \"[Swarm] Agent stopped: $AGENT_TYPE ($AGENT_ID)\" >> ~/.claude/swarm.log'",
						"async": true,
						"timeout": 5
					}
				]
			}
		],
		"Notification": [
			{
				"hooks": [
					{
						"type": "command",
						"command": "bash \"$HOME/.claude/scripts/notify.sh\"",
						"async": true,
						"timeout": 10
					}
				]
			}
		]
	}
}
